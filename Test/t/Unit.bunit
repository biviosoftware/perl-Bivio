# Copyright (c) 2005 bivio Software, Inc.  All Rights Reserved.
# $Id$
Request();
options({
    compute_params => sub {
	my(undef, $params, $method) = @_;
	return $method eq 'builtin_email' ? ['hello'] : $params;
    },
});
[
    class() => [
	simple_package_name => 'Unit',
	simple_package_name => not_die(),
	builtin_create_user => [
	    'unit_bunit' => sub {
		foreach my $c (
		    [qw(unit_bunit auth_realm owner name)],
		    [qw(unit_bunit auth_user name)],
		) {
		    assert_eq(shift(@$c), req()->get_nested(@$c));
		}
		return 1;
	    },
	],
	builtin_email => qr{hello\@},
    ],
    sub {'Bivio::UNIVERSAL'} => [
	simple_package_name => 'UNIVERSAL',
    ],
    sub {'Bivio::Die'} => [
	die => DIE(),
    ],
];
